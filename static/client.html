<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <meta charset="UTF-8">
    <title>Project Template</title>    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>

    <script>
    "use strict";   
    var queryUrl="http://127.0.0.1:5000/sample_query"
    var modelbaseUrl="http://127.0.0.1:5000/webservice"    

    function onError(error, msg) {
        console.error("ERROR " + msg + " : " + error)
    }

    function onSuccess(data, msg) {
        console.log("SUCCESS " + msg + " : " + data)
    }

    function onQueryFetched (error, json) {
        if (error) onError(error, "onQueryFetched")
        else onSuccess(JSON.stringify(json), "onQueryFetched")
        d3.json(modelbaseUrl)
            .header("Content-Type", "application/json")
            .post(JSON.stringify(json), onQueryExecuted)
    }

    function onQueryExecuted (error, json) {
        if (error) onError(error, "onQueryExecuted")
        else onSuccess(JSON.stringify(json), "onQueryExecuted")
    }

    // load a json query. When loaded send the query
    d3.json(queryUrl).post( onQueryFetched )

    </script>
</head>

<body>
    Hello Philipp - smile!
</body>
</html>